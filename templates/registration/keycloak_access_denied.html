{% extends "base.html" %}

{% block title %}Доступ запрещён - {{ block.super }}{% endblock %}

{% block content %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      
      <div class="text-center mb-4">
        <i class="bi bi-shield-x text-danger" style="font-size: 5rem;"></i>
        <h2 class="mt-3">Доступ запрещён</h2>
      </div>

      <div class="card">
        <div class="card-body">
          <div class="alert alert-warning">
            <i class="bi bi-exclamation-triangle me-2"></i>
            <strong>Ваша учётная запись не авторизована для доступа к этой системе.</strong>
          </div>

          <p class="mb-3">
            Вы успешно прошли аутентификацию в Keycloak, но ваш логин не найден 
            в списке разрешенных пользователей этого приложения.
          </p>

          <hr>

          <h6 class="mb-3">Что делать?</h6>
          
          <ol class="small">
            <li class="mb-2">
              Обратитесь к администратору системы для получения доступа
            </li>
            <li class="mb-2">
              Сообщите ваш логин: <strong class="text-primary">{{ request.user.username|default:"не определен" }}</strong>
            </li>
            <li class="mb-2">
              После добавления в whitelist попробуйте войти снова
            </li>
          </ol>

          <div class="alert alert-info small mt-3">
            <i class="bi bi-info-circle me-1"></i>
            Администратор должен добавить ваш логин командой:<br>
            <code class="d-block mt-2">
              python manage.py manage_whitelist --add {{ request.user.username|default:"USERNAME" }}
            </code>
          </div>

        </div>
      </div>

      <div class="text-center mt-3">
        <a href="{% url 'logout' %}" class="btn btn-outline-secondary">
          <i class="bi bi-box-arrow-left me-1"></i>
          Выйти из системы
        </a>
      </div>

    </div>
  </div>
</div>
{% endblock %}